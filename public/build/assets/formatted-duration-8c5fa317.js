var e,t;import{j as a}from"./vendor-query-78cda8b8.js";import{bO as s,Q as r,a5 as n,cc as i,cb as l,aU as o,m as c,cd as u,ce as d,cf as m,cg as h,ch as p,ci as f,bX as g,b7 as b,a7 as y,be as v,bf as x,aX as w,cj as k,ck as j,cl as V,aL as N,cm as S,cn as D,aT as P,aS as C,co as M,a6 as R,D as z,bY as I,aV as F,cp as $,cq as O,cr as T,cs as L,ct as A,cu as E,I as H,a3 as W,u as B,bb as K,bQ as U,aW as Z,b0 as Y,b1 as q,T as _,aJ as Q,bI as X,ai as G,as as J,B as ee,am as te,ao as ae,aN as se,w as re,bR as ne}from"./main-07195345.js";import{r as ie,R as le}from"./vendor-core-56622d1d.js";import{c as oe,m as ce,A as ue}from"./vendor-ui-7d465812.js";import{u as de}from"./vendor-form-c566d70e.js";function me(e,t=-1/0,a=1/0){return Math.min(Math.max(e,t),a)}function he(e,t){let a=e,s=t.toString(),r=s.indexOf("."),n=r>=0?s.length-r:0;if(n>0){let e=Math.pow(10,n);a=Math.round(a*e)/e}return a}function pe(e,t,a,s){t=Number(t),a=Number(a);let r=(e-(isNaN(t)?0:t))%s,n=he(2*Math.abs(r)>=s?e+Math.sign(r)*(s-Math.abs(r)):e-r,s);return isNaN(t)?!isNaN(a)&&n>a&&(n=Math.floor(he(a/s,s))*s):n<t?n=t:!isNaN(a)&&n>a&&(n=t+Math.floor(he((a-t)/s,s))*s),n=he(n,s),n}function fe(e,t,a=10){const s=Math.pow(a,t);return Math.round(e*s)/s}const ge=new RegExp("^.*\\(.*\\).*$"),be=["latn","arab","hanidec"];class ye{parse(e){return xe(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,t,a){return xe(this.locale,this.options,e).isValidPartialNumber(e,t,a)}getNumberingSystem(e){return xe(this.locale,this.options,e).options.numberingSystem}constructor(e,t={}){this.locale=e,this.options=t}}const ve=new Map;function xe(e,t,a){let s=we(e,t);if(!e.includes("-nu-")&&!s.isValidPartialNumber(a))for(let r of be)if(r!==s.options.numberingSystem){let s=we(e+(e.includes("-u-")?"-nu-":"-u-nu-")+r,t);if(s.isValidPartialNumber(a))return s}return s}function we(e,t){let a=e+(t?Object.entries(t).sort(((e,t)=>e[0]<t[0]?-1:1)).join():""),s=ve.get(a);return s||(s=new ke(e,t),ve.set(a,s)),s}class ke{parse(e){let t=this.sanitize(e);if(this.symbols.group&&(t=Ne(t,this.symbols.group,"")),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(t=t.replace(this.symbols.minusSign,"-")),t=t.replace(this.symbols.numeral,this.symbols.index),"percent"===this.options.style){let e=t.indexOf("-");t=t.replace("-","");let a=t.indexOf(".");-1===a&&(a=t.length),t=t.replace(".",""),t=a-2==0?`0.${t}`:a-2==-1?`0.0${t}`:a-2==-2?"0.00":`${t.slice(0,a-2)}.${t.slice(a-2)}`,e>-1&&(t=`-${t}`)}let a=t?+t:NaN;if(isNaN(a))return NaN;if("percent"===this.options.style){var r,n;let e={...this.options,style:"decimal",minimumFractionDigits:Math.min((null!==(r=this.options.minimumFractionDigits)&&void 0!==r?r:0)+2,20),maximumFractionDigits:Math.min((null!==(n=this.options.maximumFractionDigits)&&void 0!==n?n:0)+2,20)};return new ye(this.locale,e).parse(new s(this.locale,e).format(a))}return"accounting"===this.options.currencySign&&ge.test(e)&&(a*=-1),a}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),"arab"===this.options.numberingSystem&&(this.symbols.decimal&&(e=(e=e.replace(",",this.symbols.decimal)).replace(String.fromCharCode(1548),this.symbols.decimal)),this.symbols.group&&(e=Ne(e,".",this.symbols.group))),"fr-FR"===this.options.locale&&(e=Ne(e,".",String.fromCharCode(8239))),e}isValidPartialNumber(e,t=-1/0,a=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&t<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&a>0&&(e=e.slice(this.symbols.plusSign.length)),(!this.symbols.group||!e.startsWith(this.symbols.group))&&(!(this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&0===this.options.maximumFractionDigits)&&(this.symbols.group&&(e=Ne(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),0===e.length))}constructor(e,t={}){var a;this.locale=e,this.formatter=new Intl.NumberFormat(e,t),this.options=this.formatter.resolvedOptions(),this.symbols=function(e,t,a,s){var r,n,i,l;let o=new Intl.NumberFormat(e,{...a,minimumSignificantDigits:1,maximumSignificantDigits:21}),c=o.formatToParts(-10000.111),u=o.formatToParts(10000.111),d=Ve.map((e=>o.formatToParts(e)));var m;let h=null!==(m=null===(r=c.find((e=>"minusSign"===e.type)))||void 0===r?void 0:r.value)&&void 0!==m?m:"-",p=null===(n=u.find((e=>"plusSign"===e.type)))||void 0===n?void 0:n.value;p||"exceptZero"!==(null==s?void 0:s.signDisplay)&&"always"!==(null==s?void 0:s.signDisplay)||(p="+");let f=new Intl.NumberFormat(e,{...a,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001),g=null===(i=f.find((e=>"decimal"===e.type)))||void 0===i?void 0:i.value,b=null===(l=c.find((e=>"group"===e.type)))||void 0===l?void 0:l.value,y=c.filter((e=>!je.has(e.type))).map((e=>Se(e.value))),v=d.flatMap((e=>e.filter((e=>!je.has(e.type))).map((e=>Se(e.value))))),x=[...new Set([...y,...v])].sort(((e,t)=>t.length-e.length)),w=0===x.length?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${x.join("|")}|[\\p{White_Space}]`,"gu"),k=[...new Intl.NumberFormat(a.locale,{useGrouping:!1}).format(9876543210)].reverse(),j=new Map(k.map(((e,t)=>[e,t]))),V=new RegExp(`[${k.join("")}]`,"g");return{minusSign:h,plusSign:p,decimal:g,group:b,literals:w,numeral:V,index:e=>String(j.get(e))}}(e,this.formatter,this.options,t),"percent"===this.options.style&&((null!==(a=this.options.minimumFractionDigits)&&void 0!==a?a:0)>18||this.options.maximumFractionDigits)}}const je=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Ve=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function Ne(e,t,a){return e.replaceAll?e.replaceAll(t,a):e.split(t).join(a)}function Se(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const De=r(a.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function Pe(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function Ce(e){return e.set({hour:23,minute:59,second:59,millisecond:999})}function Me(){var e,t,a;const s=null==(e=n())?void 0:e.settings.dates.default_timezone,r=(null==(a=null==(t=n())?void 0:t.user)?void 0:a.timezone)||s||"auto";return r&&"auto"!==r?r:i()}function Re(){const e=o();return ie.useMemo((()=>{try{return l(e)}catch(t){return l("UTC")}}),[e])}function ze(){const e=Me();try{return l(e)}catch(t){return l("UTC")}}const Ie=Pe(ze()),Fe=(null==(t=null==(e=n())?void 0:e.i18n)?void 0:t.language)||"en",$e=[{key:0,label:c("Today"),getRangeValue:()=>({preset:0,start:Ie,end:Ce(Ie)})},{key:1,label:c("Yesterday"),getRangeValue:()=>({preset:1,start:Ie.subtract({days:1}),end:Ce(Ie).subtract({days:1})})},{key:2,label:c("This week"),getRangeValue:()=>({preset:2,start:u(Ie,Fe),end:d(Ce(Ie),Fe)})},{key:3,label:c("Last week"),getRangeValue:()=>{const e=u(Ie,Fe).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:c("Last 7 days"),getRangeValue:()=>({preset:4,start:Ie.subtract({days:7}),end:Ce(Ie)})},{key:5,label:c("Last 30 days"),getRangeValue:()=>({preset:5,start:Ie.subtract({days:30}),end:Ce(Ie)})},{key:6,label:c("Last 3 months"),getRangeValue:()=>({preset:6,start:Ie.subtract({months:3}),end:Ce(Ie)})},{key:7,label:c("Last 12 months"),getRangeValue:()=>({preset:7,start:Ie.subtract({months:12}),end:Ce(Ie)})},{key:8,label:c("This month"),getRangeValue:()=>({preset:8,start:m(Ie),end:h(Ce(Ie))})},{key:9,label:c("This year"),getRangeValue:()=>({preset:9,start:p(Ie),end:f(Ce(Ie))})},{key:10,label:c("Last year"),getRangeValue:()=>({preset:10,start:p(Ie).subtract({years:1}),end:f(Ce(Ie)).subtract({years:1})})}],Oe=r(a.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Te=le.forwardRef(((e,t)=>{const{children:s,inputProps:r,wrapperProps:n,className:i,autoFocus:l,style:o,onClick:c}=e;return a.jsx("div",{...n,onClick:c,children:a.jsx("div",{...r,role:"group",className:oe(i,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:t,style:o,children:a.jsx(g,{autoFocus:l,children:s})})})})),Le=le.forwardRef((({inputRef:e,wrapperProps:t,children:s,onBlur:r,...n},i)=>{const l=b(n),o=y(i),{fieldProps:c,inputProps:u}=v({...n,focusRef:o,labelElementType:"span"});return l.wrapper=oe(l.wrapper,n.disabled&&"pointer-events-none"),a.jsx(x,{wrapperProps:w(t,{onBlur:e=>{var t;(null==(t=o.current)?void 0:t.contains(e.relatedTarget))||null==r||r(e)},onClick:()=>{const e=k(o);null==e||e.focusFirst()}}),fieldClassNames:l,ref:o,...c,children:a.jsx(Te,{inputProps:u,className:oe(l.input,"gap-10"),ref:e,children:s})})}));function Ae(e,t,a){return null!=t&&e.compare(t)<0||null!=a&&e.compare(a)>0}function Ee(e,t,a){try{return V(e,t,a)}catch(s){return V(e,"UTC",a)}}function He(e,t){const a=o(),s=t.timezone??a,[r,n]=ie.useState(!1),i=t.closeDialogOnSelection??!0;return{timezone:s,granularity:t.granularity||(e instanceof j?"day":"minute"),min:t.min?Ee(t.min,s):void 0,max:t.max?Ee(t.max,s):void 0,calendarIsOpen:r,setCalendarIsOpen:n,closeDialogOnSelection:i}}function We(e){var t,a;const s=Re(),[r,n]=ie.useState({start:!(e.value&&e.value.start||(null==(t=e.defaultValue)?void 0:t.start)),end:!(e.value&&e.value.end||(null==(a=e.defaultValue)?void 0:a.end))}),i=e.onChange,[l,o]=N(e.value?Ue(e.value,s):void 0,e.value?void 0:Ue(e.defaultValue,s),(e=>{n({start:!1,end:!1}),null==i||i(e)})),{min:c,max:u,granularity:d,timezone:m,calendarIsOpen:h,setCalendarIsOpen:p,closeDialogOnSelection:f}=He(l.start,e),g=ie.useCallback((()=>{n({start:!0,end:!0}),o(Ue(null,s)),null==i||i(null),p(!1)}),[s,o,i,p]),[b,y]=ie.useState(null),[v,x]=ie.useState(!1),[w,k]=ie.useState(l),[j,V]=ie.useState((()=>Be(l,u))),C=ie.useCallback((e=>{let t=e.start,a=e.end;c&&(t=S(t,c));const s=u?D(u,a):a;t=D(t,s);const r=c?S(c,t):t;return a=S(a,r),u&&(a=D(a,u)),{start:Ee(t,m),end:Ee(a,m)}}),[c,u,m]),M=ie.useCallback((e=>{const t={...C(e),preset:e.preset};o(t),k(t),V(Be(t,u)),n({start:!1,end:!1})}),[o,C,u]),R=ie.useCallback((e=>!r.start&&P(e,w.start)||!r.end&&P(e,w.end)),[w,r]),z=ie.useCallback((e=>(v||!r.start&&!r.end)&&e.compare(w.start)>=0&&e.compare(w.end)<=0),[w,r,v]),I=ie.useCallback((e=>P(e,w.start)),[w]),F=ie.useCallback((e=>P(e,w.end)),[w]),$=ie.useCallback(((e,t)=>({onPointerEnter:()=>{v&&t&&k(Ke({start:b,end:e,timezone:m}))},onClick:()=>{if(v){const t=Ke({start:b,end:e,timezone:m});t.start=Pe(t.start),t.end=Ce(t.end),x(!1),y(null),null==M||M(t),f&&(null==p||p(!1))}else x(!0),y(e),k(Ke({start:e,end:e,timezone:m}))}})),[b,v,M,p,f,m]);return{selectedValue:l,setSelectedValue:M,calendarIsOpen:h,setCalendarIsOpen:p,dayIsActive:R,dayIsHighlighted:z,dayIsRangeStart:I,dayIsRangeEnd:F,getCellProps:$,calendarDates:j,setIsPlaceholder:n,isPlaceholder:r,clear:g,setCalendarDates:V,min:c,max:u,granularity:d,timezone:m,closeDialogOnSelection:f}}function Be(e,t){let a=C(m(e.start)),s=C(h(e.end));return M(a,s)&&(s=h(s.add({months:1}))),t&&s.compare(t)>0&&(s=a,a=m(a.subtract({months:1}))),[a,s]}function Ke(e){const t=Ee(e.start,e.timezone),a=Ee(e.end,e.timezone);return t.compare(a)>0?{start:a,end:t}:{start:t,end:a}}function Ue(e,t){return(null==e?void 0:e.start)&&(null==e?void 0:e.end)?e:!(null==e?void 0:e.start)&&(null==e?void 0:e.end)?(e.start=e.end.subtract({months:1}),e):!(null==e?void 0:e.end)&&(null==e?void 0:e.start)?(e.end=e.start.add({months:1}),e):{start:t,end:t.add({months:1})}}const Ze=r(a.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");const Ye={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function qe({segment:e,domProps:t,value:s,onChange:r,isPlaceholder:n,state:{timezone:i,calendarIsOpen:l,setCalendarIsOpen:o}}){const c=R(),u=ie.useRef(""),{localeCode:d}=z(),m=I(),h=F({timeZone:i}),p=ie.useMemo((()=>new ye(d,{maximumFractionDigits:0})),[d]),f=t=>{r(function(e,t,a,s){switch(t){case"day":case"month":case"year":return e.set({[t]:a})}if("hour"in e)switch(t){case"dayPeriod":{const t=e.hour,s=t>=12;return a>=12===s?e:e.set({hour:s?t-12:t+12})}case"hour":if(s.hour12){const t=e.hour>=12;t||12!==a||(a=0),t&&a<12&&(a+=12)}case"minute":case"second":return e.set({[t]:a})}return e}(s,e.type,t,h.resolvedOptions()))},g=t=>{r(function(e,t,a,s){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,a,{round:"year"===t})}if("hour"in e)switch(t){case"dayPeriod":{const t=e.hour,a=t>=12;return e.set({hour:a?t-12:t+12})}case"hour":case"minute":case"second":return e.cycle(t,a,{round:"hour"!==t,hourCycle:s.hour12?12:24})}return e}(s,e.type,t,h.resolvedOptions()))},b=F({hour:"numeric",hour12:!0}),y=ie.useMemo((()=>{const e=new Date;return e.setHours(0),b.formatToParts(e).find((e=>"dayPeriod"===e.type)).value}),[b]),v=ie.useMemo((()=>{const e=new Date;return e.setHours(12),b.formatToParts(e).find((e=>"dayPeriod"===e.type)).value}),[b]),x=t=>{const a=u.current+t;switch(e.type){case"dayPeriod":if(y.toLowerCase().startsWith(t))f(0);else{if(!v.toLowerCase().startsWith(t))break;f(12)}null==m||m.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!p.isValidPartialNumber(a))return;let s=p.parse(a),r=s,n=0===e.minValue;if("hour"===e.type&&h.resolvedOptions().hour12){switch(h.resolvedOptions().hourCycle){case"h11":s>11&&(r=p.parse(t));break;case"h12":n=!1,s>12&&(r=p.parse(t))}e.value>=12&&s>1&&(s+=12)}else s>e.maxValue&&(r=p.parse(t));if(Number.isNaN(s))return;const i=0!==r||n;i&&f(r),Number(`${s}0`)>e.maxValue||a.length>=String(e.maxValue).length?(u.current="",i&&(null==m||m.focusNext())):u.current=a;break}}},k=c?{}:{"aria-label":e.type,"aria-valuetext":n?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":n?void 0:e.value,tabIndex:0,onKeyDown:t=>{var a;if(!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){switch(t.key){case"ArrowLeft":t.preventDefault(),t.stopPropagation(),null==m||m.focusPrevious();break;case"ArrowRight":t.preventDefault(),t.stopPropagation(),null==m||m.focusNext();break;case"Enter":null==(a=t.target.closest("form"))||a.requestSubmit(),o(!l);break;case"Tab":break;case"Backspace":case"Delete":t.preventDefault(),t.stopPropagation(),(()=>{if(p.isValidPartialNumber(e.text)){const t=e.text.slice(0,-1),a=p.parse(t);if(0===t.length||0===a){const t=$(i);e.type in t&&f(t[e.type])}else f(a);u.current=t}else"dayPeriod"===e.type&&g(-1)})();break;case"ArrowUp":t.preventDefault(),u.current="",g(1);break;case"ArrowDown":t.preventDefault(),u.current="",g(-1);break;case"PageUp":t.preventDefault(),u.current="",g(Ye[e.type]||1);break;case"PageDown":t.preventDefault(),u.current="",g(-(Ye[e.type]||1));break;case"Home":t.preventDefault(),u.current="",f(e.maxValue);break;case"End":t.preventDefault(),u.current="",f(e.minValue)}x(t.key)}}};return a.jsx("div",{...w(t,{...k,onFocus:e=>{u.current="",e.target.scrollIntoView({block:"nearest"})},onClick:e=>{e.preventDefault(),e.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function _e({segment:e,domProps:t}){const s=I();return a.jsx("div",{...t,onPointerDown:e=>{if("mouse"===e.pointerType){e.preventDefault();(null==s?void 0:s.focusNext({from:e.target}))||null==s||s.focusPrevious({from:e.target})}},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Qe({segmentProps:e,state:t,value:s,onChange:r,isPlaceholder:n}){const{granularity:i,timezone:l}=t,o=ie.useMemo((()=>{const e={year:"numeric",month:"numeric",day:"numeric",timeZone:l};return"minute"===i&&(e.hour="numeric",e.minute="numeric"),e}),[i,l]),c=F(o),u=ie.useMemo((()=>s.toDate()),[s]),d=ie.useMemo((()=>c.formatToParts(u).map((e=>{const t=function(e,t,a){switch(t){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:T(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:O(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(a.hour12){const t=e.hour>=12;return{value:e.hour,minValue:t?12:0,maxValue:t?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}(s,e.type,c.resolvedOptions()),a=n&&"literal"!==e.type?t.placeholder:e.value;return{type:e.type,text:", "===e.value?" ":a,...t,minLength:"literal"!==e.type?String(t.maxValue).length:1}}))),[u,c,n,s]);return a.jsx("div",{className:"flex items-center",children:d.map(((i,l)=>"literal"===i.type?a.jsx(_e,{domProps:e,segment:i},l):a.jsx(qe,{isPlaceholder:n,domProps:e,state:t,value:s,onChange:r,segment:i},l)))})}function Xe({date:e,currentMonth:t,state:{dayIsActive:s,dayIsHighlighted:r,dayIsRangeStart:n,dayIsRangeEnd:i,getCellProps:l,timezone:o,min:c,max:u}}){const{localeCode:d}=z(),m=L(e,d),h=s(e),p=r(e),f=n(e),g=i(e),b=A(e,o),y=M(e,t),v=Ae(e,c,u);return a.jsxs("div",{role:"button","aria-disabled":v,className:oe("relative isolate h-40 w-40 flex-shrink-0 text-sm",v&&"pointer-events-none text-disabled",!y&&"pointer-events-none invisible"),...l(e,y),children:[a.jsx("span",{className:oe("absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full",!h&&!b&&"hover:bg-hover",h&&"bg-primary font-semibold text-on-primary",b&&!h&&"bg-chip"),children:e.day}),p&&y&&a.jsx("span",{className:oe("absolute inset-0 h-full w-full bg-primary/focus",(f||0===m||1===e.day)&&"rounded-l-full",(g||6===m||e.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function Ge({startDate:e,state:t,isFirst:s,isLast:r}){const{localeCode:n}=z(),i=E(e,n),l=u(e,n);return a.jsxs("div",{className:"w-280 flex-shrink-0",children:[a.jsx(Je,{isFirst:s,isLast:r,state:t,currentMonth:e}),a.jsxs("div",{className:"block",role:"grid",children:[a.jsx(et,{state:t,startDate:e}),[...new Array(i).keys()].map((s=>a.jsx(ce.div,{className:"mb-6 flex",children:[...new Array(7).keys()].map((r=>a.jsx(Xe,{date:l.add({weeks:s,days:r}),currentMonth:e,state:t},r)))},s)))]})]})}function Je({currentMonth:e,isFirst:t,isLast:s,state:{calendarDates:r,setCalendarDates:n,timezone:i,min:l,max:o}}){const c=e=>{const t=r.length;let a;a="forward"===e?r.map((e=>h(e.add({months:t})))):r.map((e=>h(e.subtract({months:t})))),n(a)},u=F({month:"long",year:"numeric",era:"gregory"!==e.calendar.identifier?"long":void 0,calendar:e.calendar.identifier}),d=Ae(e.subtract({days:1}),l,o),p=Ae(m(e.add({months:1})),l,o);return a.jsxs("div",{className:"flex items-center justify-between gap-10",children:[a.jsx(H,{size:"md",className:oe("text-muted",!t&&"invisible"),disabled:!t||d,"aria-hidden":!t,onClick:()=>{c("backward")},children:a.jsx(W,{})}),a.jsx("div",{className:"select-none text-sm font-semibold",children:u.format(e.toDate(i))}),a.jsx(H,{size:"md",className:oe("text-muted",!s&&"invisible"),disabled:!s||p,"aria-hidden":!s,onClick:()=>{c("forward")},children:a.jsx(De,{})})]})}function et({state:{timezone:e},startDate:t}){const{localeCode:s}=z(),r=F({weekday:"short"}),n=u(t,s);return a.jsx("div",{className:"flex",children:[...new Array(7).keys()].map((t=>{const s=n.add({days:t}).toDate(e),i=r.format(s);return a.jsx("div",{className:"relative h-40 w-40 flex-shrink-0 text-sm font-semibold",children:a.jsx("div",{className:"absolute flex h-full w-full select-none items-center justify-center",children:i})},t)}))})}function tt({state:e,visibleMonths:t=1}){return R()&&(t=1),a.jsx(ie.Fragment,{children:[...new Array(t).keys()].map((s=>{const r=C(m(e.calendarDates[s])),n=0===s,i=s===t-1;return a.jsx(Ge,{state:e,startDate:r,isFirst:n,isLast:i},s)}))})}const at=ie.memo((({start:e,end:t,options:s,preset:r,timezone:n})=>{const{dates:i}=B(),l=o(),c=n||(null==s?void 0:s.timeZone)||l,u=F(s||K[r||(null==i?void 0:i.format)]);if(!e||!t)return null;let d;try{d=u.formatRange(st(e,c),st(t,c))}catch(m){d=""}return a.jsx(ie.Fragment,{children:d})}),U);function st(e,t){return"string"==typeof e?Z(e,t).toDate():"toDate"in e?e.toDate(t):e}function rt({onPresetSelected:e,selectedValue:t}){return a.jsx(Y,{children:$e.map((s=>a.jsx(q,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(null==t?void 0:t.preset)===s.key,onSelected:()=>{const t=s.getRangeValue();e(t)},children:a.jsx(_,{...s.label})},s.key)))})}const nt=le.forwardRef(((e,t)=>{const{children:s,size:r="sm",description:n,className:i,invalid:l,autoFocus:o,errorMessage:c,iconRight:u,...d}=e,m=y(t);X({autoFocus:o},m);const h=function(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}(r),p=b(e),f=ie.useId();return a.jsxs("div",{className:oe(i,"isolate"),children:[a.jsxs("label",{className:"flex select-none items-center",children:[a.jsx("input",{...d,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":n?f:void 0,ref:m,"aria-checked":d.checked,className:oe(h,!l&&"checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark",l&&"checked:border-danger checked:bg-danger","relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary","before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform","checked:before:border-white","focus-visible:ring",e.disabled&&"cursor-not-allowed opacity-80")}),s&&a.jsx("span",{className:oe(p.size.font,"ml-12",l&&"text-danger",e.disabled&&"text-disabled"),children:s}),u]}),n&&!c&&a.jsx("div",{id:f,className:p.description,children:n}),c&&a.jsx("div",{id:f,className:p.error,children:c})]})}));function it(e){const{field:{onChange:t,onBlur:s,value:r=!1,ref:n},fieldState:{invalid:i,error:l}}=de({name:e.name}),o={onChange:e=>{e.target.value&&"on"!==e.target.value?t(!!e.target.checked&&e.target.value):t(e)},onBlur:s,checked:!!r,invalid:i,errorMessage:null==l?void 0:l.message,name:e.name};return a.jsx(nt,{ref:n,...w(e,o)})}const lt=[{key:0,label:c("Preceding period"),getRangeValue:e=>{const t=e.start,a=(e.end.toDate().getTime()-t.toDate().getTime())/6e4;return{preset:0,start:t.subtract({minutes:a}),end:t}}},{key:1,label:c("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:c("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function ot({originalRangeValue:e,onPresetSelected:t,selectedValue:s}){return a.jsx(Y,{children:lt.map((r=>a.jsx(q,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(null==s?void 0:s.preset)===r.key,onSelected:()=>{const a=r.getRangeValue(e);t(a)},children:a.jsx(_,{...r.label})},r.key)))})}function ct({state:e,compareState:t,showInlineDatePickerField:s=!1,compareVisibleDefault:r=!1}){const n=Q("(max-width: 1024px)",i);var i;const{close:l}=G(),o=ie.useRef(e),c=e.isPlaceholder.start||e.isPlaceholder.end,[u,d]=ie.useState(r),m=a.jsxs(J,{dividerTop:!0,startAction:c||n?void 0:a.jsx("div",{className:"text-xs",children:a.jsx(at,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}),children:[a.jsx(ee,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(o.current.selectedValue),e.setIsPlaceholder(o.current.isPlaceholder),l()},children:a.jsx(_,{message:"Cancel"})}),a.jsx(ee,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const a=e.selectedValue;t&&u&&(a.compareStart=t.selectedValue.start,a.compareEnd=t.selectedValue.end),l(a)},children:a.jsx(_,{message:"Select"})})]});return a.jsxs(te,{size:"auto",children:[a.jsxs(ae,{className:"flex",padding:"p-0",children:[!n&&a.jsxs("div",{className:"min-w-192 py-14",children:[a.jsx(rt,{selectedValue:e.selectedValue,onPresetSelected:t=>{e.setSelectedValue(t),e.closeDialogOnSelection&&l(t)}}),!!t&&a.jsxs(ie.Fragment,{children:[a.jsx(nt,{className:"mx-20 mb-10 mt-14",checked:u,onChange:e=>d(e.target.checked),children:a.jsx(_,{message:"Compare"})}),u&&a.jsx(ot,{originalRangeValue:e.selectedValue,selectedValue:t.selectedValue,onPresetSelected:e=>{t.setSelectedValue(e)}})]})]}),a.jsx(ue,{initial:!1,children:a.jsx(ut,{state:e,compareState:t,showInlineDatePickerField:s,compareVisible:u})})]}),!e.closeDialogOnSelection&&m]})}function ut({state:e,compareState:t,showInlineDatePickerField:s,compareVisible:r}){return a.jsxs(ce.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[s&&a.jsxs("div",{children:[a.jsx(dt,{state:e}),!!t&&r&&a.jsx(dt,{state:t,label:a.jsx(_,{message:"Compare"})})]}),a.jsx("div",{className:"flex items-start gap-36",children:a.jsx(tt,{state:e,visibleMonths:2})})]})}function dt({state:e,label:t}){const{selectedValue:s,setSelectedValue:r}=e;return a.jsxs(Le,{className:"mb-20 mt-10",label:t,children:[a.jsx(Qe,{state:e,value:s.start,onChange:e=>{r({...s,start:e})}}),a.jsx(Ze,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(Qe,{state:e,value:s.end,onChange:e=>{r({...s,end:e})}})]})}const mt=ie.memo((({value:e,...t})=>{const s=se(t);return isNaN(e)&&(e=0),a.jsx(ie.Fragment,{children:s.format(e)})}),U),ht=r(a.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),pt=ie.memo((({minutes:e,seconds:t,ms:s,startDate:r,endDate:n,verbose:i=!1,addZeroToFirstUnit:l=!0,isLive:o,maxIsLiveMs:u,minDuration:d=0,liveInterval:m=5e3})=>{const{trans:h}=re(),p=ie.useMemo((()=>{if(r||n){const e=r?ne(r):ze(),t=(n?ne(n):ze()).toDate().getTime()-e.toDate().getTime();return t>d?t:d}return e?6e4*e:t?1e3*t:s||d}),[e,t,s,r,n,d]),[f,g]=ie.useState(p);ie.useEffect((()=>{g(p)}),[p]);const b=ie.useRef(f);b.current=f,ie.useEffect((()=>{const e=u&&b.current>u;if(o&&!e){const e=setInterval((()=>{g((e=>e+m))}),m);return()=>clearInterval(e)}}),[o,m,u,p]);const y=f<0?-f:f,v={days:Math.trunc(y/864e5),hours:Math.trunc(y/36e5)%24,minutes:Math.trunc(y/6e4)%60,seconds:Math.trunc(y/1e3)%60};let x;return x=i?function(e,t){const a=[];e.days&&a.push(`${e.days}${t(c("d"))}`);e.hours&&a.push(`${e.hours}${t(c("hr"))}`);e.minutes&&a.push(`${e.minutes}${t(c("min"))}`);e.seconds&&!e.hours&&a.push(`${e.seconds}${t(c("sec"))}`);return a.join(" ")}(v,h):function(e,t=!0){const a=ft(e.seconds);let s="";e.days&&!s&&(s=`${e.days}:${ft(e.hours)}:${ft(e.minutes)}:${a}`);e.hours&&!s&&(s=`${ft(e.hours,t)}:${ft(e.minutes)}:${a}`);s||(s=`${ft(e.minutes,t)}:${a}`);return s}(v,l),a.jsx(ie.Fragment,{children:x})}));function ft(e,t=!0){if(!t)return e;let a=`${e}`;return 1===a.length&&(a="0"+a),a}export{me as $,ht as A,tt as C,$e as D,at as F,Te as I,De as K,nt as S,pt as a,mt as b,He as c,Le as d,Oe as e,Qe as f,it as g,fe as h,We as i,lt as j,ct as k,Ze as l,pe as m,Me as n,Ee as t,Re as u};
